{% extends 'layout/main.html.twig' %}

{% block title %}Accueil{% endblock %}

{% block main %}
    <div class="bienvenue">
        <h1>Bienvenue {{ app.user.prenom }}</h1>
    </div>
    <h2>Formations disponibles</h2>
    {% for formation in formationsDisponibles %}
        <div class="home-formation-container">
            <h3>{{ formation.titre }}</h3>
            <div class="truncate">
                {{ formation.description|raw }}
            </div>
            <h3>Sessions</h3>
            <ul>
            {% for session in formation.getSessionsVisibles(app.user) %}
                <li class="home-formation-session">
                <a href={{ path('app_session', {id: session.id}) }}>{{ session.titre }} - {{ session.getNbParticipantsRestants() }} restantes / {{ session.getNbParticipantsMax() }} places - du {{ session.heureDebut|format_datetime() }} au {{ session.heureFin|format_datetime() }} - {{ session.salle }}</span>
                {% if session.estParticipant(app.user) %}
                    <a href={{ path('app_session_desinscription', {id: session.id}) }} class="btn warning-button">Se d√©sinscrire</a>
                {% else %}
                    <a href={{ path('app_session_inscription', {id: session.id}) }} class="btn utility-button">S'inscrire</a>
                {% endif %}
                </li>
            {% endfor %}
            </ul>
        </div>
    {% endfor %}
    {% if formationsDisponibles is empty %}
        <p>Aucune formation disponible.</hp>
    {% endif %}
{% endblock %}